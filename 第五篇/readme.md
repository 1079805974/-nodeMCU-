# 树莓派直接连接笔记本电脑方法
https://blog.csdn.net/u013895577/article/details/79579161


当我们为新买来的树莓派刷上系统之后，如何将树莓派和笔记本电脑连接到同一网络使用SSH工具登录树莓派呢？相信大多数人的做法是将树莓派连接到路由器上，笔者将介绍一种直接使用网线连接树莓派的方法。
准备材料
树莓派
已经刷入系统的SD卡
一根网线
一个已经连接互联网的笔记本
usb网口转换器（可选，若笔记本已经通过有线方式连接则选）
连接

物理连接

将树莓派通过网线直接连接笔记本电脑，若笔记本电脑已经使用有线方式连接互联网，占用了网口，则需要使用usb网口转换器拓展笔记本网口。

网络设置

此时，打开网络适配器设置，此时我们可以看到已经连接互联网的网络和与树莓派连接的网络。 
笔者这里左边是连接互联网的网络，右边是使用usb网口转换器连接至树莓派的网络。 

1. 设置网络共享
右击连接至互联网的网络 –> 属性 –> 共享选项卡 –> 勾选“允许其他网络用户通过此计算机的Internet连接来连接” –> 在家庭网络连接下面的下拉菜单中选择 “树莓派的网络” –>点击确认（出现将ip设置为“192.168.137.1”的提示也点击确定） 

2.查询树莓派的IP
	打开命令提示符，输入
arp -a
	1
此命令可查询与笔记本电脑又网络交互的IP地址，在接口：192.168.137.1中找到最与众不同的那个就是树莓派的IP，笔者这里是192.168.137.227，如果查询不到重新插拔树莓派的网线即可。 

	当然也可以使用Advanced IP Scanner Portable工具扫描获取树莓派的IP地址，笔者这里就不赘述。
3.使用ssh工具连接
打开ssh工具，笔者这里使用Xshell，新建一个连接，按如下配置（注意使用查询到的IP） 

点击连接，输入用户名密码即可成功连接至树莓派。
利用Putty连接树莓派

解决emergency mode问题
记得上一次玩我的树莓派是做一个小型的服务器，挂载一个8GB的USB做服务器，在Windows电脑上直接进行访问。结果今天就开启不了树莓派了，总是进入emergency mode，用jourmalctl -xb查看日志输出，发现有一个fsck的文件系统校验总是通不过，导致系统总是无法正常开启；应该就是我之前挂在用作文件共享的那个U盘，现在没有挂载成功了导致系统崩溃。可以先尝试用以下命令试一下:
umount /dev/sda1 #卸载设备
fsck -y /dev/sda1 #运行 fsck 校检并修复文件的完整性
reboot #重启系统
具体的可以参照这篇博客；还是不行的话，那就重新利用noobs重新安装系统吧.....

putty连接树莓派
https://www.cnblogs.com/yunlambert/p/8592796.html
 获取IP地址
需要三样东西:笔记本电脑+一根网线+树莓派。

首先利用网线，将树莓派和电脑连接起来，打开电脑的网络共享中心，将Internet连接共享勾选，如下图:

接下来打开cmd输入arp -a查看树莓派的ip地址，注意利用putty连接的这个ip地址和路由器分配给树莓派上网的ip地址不同。先上一个图我再进行分析:

这里动态分配给了树莓派192.168.137.15，至于为什么是这个IP地址，这是因为可以这样想，有网线就代表能进行数据传输、能组网(先不管概念问题，就这样理解)，所以树莓派实际上与两个网络相连接，第一个是路由器的无线网(局域网)，第二个是通过网线的本地连接；所以第一个ip是上网的时候路由器分配的ip地址，第二个是共享互联网的时候，电脑将本地连接这个网段设成静态IP192.168.137.1了，然后通过动态分配给了树莓派192.168.137.15这个ip地址。实际上，我们也可以通过网线将树莓派和路由器相连，这个时候路由器的ip地址分配给树莓派也是与上网的ip地址是不一样的，有兴趣的读者可以去试一试。
如果arp -a没有显示动态，可能是因为更新不及时，不断刷新或者重启树莓派试试。
利用Putty进行远程连接
接着利用putty远程连接树莓派，输入192.168.137.15进行连接。连接成功后，可以直接跳到下一步骤。如果显示"connection refused"则是有可能树莓派的ssh服务没有正常开启(一般近期的树莓派都是自动开启ssh服务的)，则需要通过读写SD卡开启ssh服务，但是由于本人有以太限制的显示屏，就还是选择直接对树莓派进行操作了，解决方法：
　　1.gedit /etc/ssh/sshd_config 将PermitRootLogin的注释取消，或者将no改为yes。(如果没有sshd_config文件说明linux上没有安装SSH，使用sudo apt-get install ssh安装之后，sshd-config文件中PermitRootLogin选项默认的是yes，新安装的ssh不用操作下面两部)
　　2.service sshd restart
　　3.setup命令进入将防火墙关闭。
用VNC连接树莓派
上一步连接之后会让我们登录树莓派，一般默认的为:Account：pi PASSWD：raspberry

将root账号解锁并设置密码:
sudo passwd root // 设置 root 账号的密码，期间会让你输入两次新密码  
sudo passwd --unlock root // 启用 root 账号登录
putty只是命令窗口，我们需要的是图形化界面，所以需要VNC，在putty上sudo apt-get install tightvncserver //安装vncserver ，然后在电脑上安装VNC-Viewer.
putty上启动vncserver:tightvncserver
在VNC-Viewer上输入192.168.137.15:1即可看到图形化界面！！
注意每次连接树莓派和电脑的时候，树莓派的动态本地连接IP地址都会有变化，这一点一定要注意！

有一篇博客写的也非常的详细，可以去看一看。
